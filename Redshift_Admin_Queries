-- find which tables have been granted to a group and also which users have been added to the group
select g.groname,u.usename FROM pg_group g, pg_user u WHERE u.usesysid = ANY(g.grolist) ORDER BY 1,2;


SELECT
    u.usename,
    s.schemaname,
    has_schema_privilege(u.usename,s.schemaname,'create') AS user_has_select_permission,
    has_schema_privilege(u.usename,s.schemaname,'usage') AS user_has_usage_permission
FROM
    pg_user u
CROSS JOIN
    (SELECT DISTINCT schemaname FROM pg_tables) s
WHERE
    u.usename = 'awsuser'
;
